{% load staticfiles %}<!DOCTYPE html><html lang="zh"><head>    <meta charset="UTF-8">    <title>账户流水</title><!--<link rel="stylesheet" href="../semantic/semantic.min.css">--><link rel="stylesheet" href="{% static 'semantic/semantic.css'%}">    <script src="http://lib.baomitu.com/jquery/1.12.4/jquery.js"></script><script src="http://lib.baomitu.com/datatables/1.10.16/js/jquery.dataTables.min.js"></script><script src="http://lib.baomitu.com/datatables/1.10.16/js/dataTables.semanticui.min.js"></script><script src="http://lib.baomitu.com/semantic-ui/2.2.13/semantic.min.js"></script></head><body><div id="sidebar" ></div><div class="dimmed pusher"><div class="ui labeled icon button" id="menu">		<i class="sidebar icon"></i>		导航		</div>    <div class="ui padded container" style="padding: 50px">        <div class="ui five item inverted menu">		<a class="item" id="a">出纳台</a>		<a class="item" id="b">玩家管理</a>		<a class="item" id="c">牌局管理</a>		<a class="item" id="d">实时报表</a>		<a class="item" id="e">俱乐部管理</a>		</div>        <div class="ui horizontal divider">	公司账户	    </div>    <div class="ui form" name="cashform" id="cashform">        <div class="inline fields">            <div class="field">                <label>请选择财务组</label>                <select class="ui selected dropdown" name="group" id="group" onchange="getaccount()">                    <option value="">请选择财务组</option>                    {% for t in group_list %}                    <option value={{ t.group_id }}>{{ t.group_name }}</option>                    {% endfor %}                </select>            </div>            <div class="field">                <label>请选择账户</label>                <select class="ui selected dropdown" name="account" id="account">                    <option></option>                </select>            </div>        </div>        <div class="inline  fields">            <div class="field">                <label>选择支出类型</label>                <select class="ui selected dropdown" name="type" id="type">                    <option value="">请选择类型</option>                    {% for t in type_list %}                    <option value={{ t.type_id }}>{{ t.type }}</option>                    {% endfor %}                </select>            </div>            <div class="field">                <label>请填写金额</label>                <input type="text" name="cash_num" id="cash_num">            </div>            <div class="field">                <label>请填写备注</label>                <input type="text" id="note">            </div>            <div>                <button class="ui primary button" name="add" id="add" onclick="cash()">提交</button>            </div>        </div>    </div>    <div class="ui horizontal divider">公司账户清单</div>    <div id="account_list"></div>    </div></div>    <div class="ui small modal">        <h2 class="header">处理结果</h2>        <div class="content">            <p id="msg1"></p>        </div>        <div class="actions">            <button class="ui negative button">返回</button>        </div>    </div><script>//加载边栏，设置导航激活按钮    $(document).ready(function () {        $("#sidebar").load("{% static 'template/sidebar.html'%}");        $("#e").addClass('active red item');        $(".ui.dropdown").dropdown();        //$.ajaxSetup({async: false});                		$("#menu").click(function(){		    $('.ui.sidebar').sidebar('toggle')});        $('#account_list').load("/company_balance_list/")    })</script><script>function getaccount() {    var group_id=$('#group').dropdown('get value');    $.ajax({        url:'/getGroupAccount/',        type:'post',        data:{'group_id':group_id},        success: function (tb_account_list) {            $('#account').empty();            $.each(JSON.parse(tb_account_list), function (key,value) {                var list = '<option class="item" value='+ key + '>' + value + '</option>';                $('#account').append(list);            })        }    })}</script><script>$('#cashform').form({    on:'blur',    inline : true,    fields: {        cash_num: {            identifier: 'cash_num',            rules: [{                type: 'empty',                prompt: '请输入金额'            }, {                type: 'regExp',                value: '/^[1-9]\\d*(\\.\\d+)?$/',                prompt: '请输入正数'            }            ]        },        account:{            identifier: 'account',            rules:[{                type:'empty'            }]        },        group:{            identifier: 'group',            rules:[{                type:'empty'            }]        },        type:{            identifier: 'type',            rules:[{                type:'empty'            }]        }    }})</script><script>    function cash() {        var message = $("#cashform").form('is valid');        if (message === true) {            var account_id = $('#account').dropdown('get value');            var cash_num = $.trim($('#cash_num').val());            var op_type_id = $('#type').dropdown('get value');            var note = $.trim($('#note').val());            $.ajax({                url: '/company_cash/',                type: 'post',                data: {'account_id': account_id, 'cash_num': cash_num, 'op_type_id': op_type_id, 'note': note},                success: function (result) {                    if (result != "False") {                        $('#msg1').text("操作成功");                        $('#cash_num').val("");                        $('.ui.modal').modal('show');                        $('#account_list').load('/company_balance_list/')                    }                    else {                        $('#msg1').text("余额不足，操作失败");                        $('.ui.modal').modal('show');                    }                }            })        }    }</script></body></html>