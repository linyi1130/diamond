<!DOCTYPE html>{% load static %}<html lang="zh"><head>    <meta charset="UTF-8">    <title>牌局管理</title>    <!--<link rel="stylesheet" href="../semantic/semantic.min.css">-->    <link rel="stylesheet" href="{% static 'semantic/semantic.css'%}"><script src="http://lib.baomitu.com/jquery/1.12.4/jquery.min.js"></script><script src="http://lib.baomitu.com/datatables/1.10.16/js/jquery.dataTables.min.js"></script><script src="http://lib.baomitu.com/datatables/1.10.16/js/dataTables.semanticui.min.js"></script><script src="http://lib.baomitu.com/semantic-ui/2.2.13/semantic.min.js"></script></head><body><div id="sidebar" ></div><div class="dimmed pusher">    <div class="ui labeled icon button" id="menu">		<i class="sidebar icon"></i>		导航    </div>    <div class="ui doubling stackable container" style="padding: 50px">        <div class="ui five item inverted menu">		<a class="item" id="a">出纳台</a>		<a class="item" id="b">玩家管理</a>		<a class="item" id="c">牌局管理</a>		<a class="item" id="d">实时报表</a>		<a class="item" id="e">俱乐部管理</a>		</div>        <div class="ui horizontal divider">	    牌局管理	    </div>        <div class="ui doubling stackable grid">        <div class="row">            <div class="three wide column">                <h3 class="ui orange header">                <i class="table icon"></i>                <div class="content">                         牌局管理                    <div class="sub orange header">新增牌局</div>                </div>                </h3>                <div name="account_list" id="account_list">                <form class="ui form" name="table_reg" id="table_reg" method="post">                    <div class="field">                    <label for="tb_type">游戏类型</label>                    <select class="ui selection dropdown" name="game_type" id="game_type">                        <option class="default text" value="">请选择游戏类型</option>                        <i class="dropdown icon"></i>                            {% for i in gametype %}                        <option class="item" value={{ i.type_id }}>{{ i.type_name }}</option>                            {% endfor %}                    </select>                    </div>                    <div class="field">                    <label for="blind">盲注级别</label>                    <select class="ui selection dropdown" onchange="getante()" id="blind" name="blind">                        <option class="default text" value="">请选择盲注级别</option>                            {% for t in blind %}                        <option class="item" value={{ t.blind_id }}>{{ t.blind_desc }}</option>                            {% endfor %}                    </select>                    </div>                    <div class="field">                    <label for="ante">前注</label>                    <select class="ui selection dropdown" id="ante">                        <option class="default text" value="">请选择前注</option>                        {% for t in ante %}                        <option class="item" value={{ t.blind_id }}>{{ t.ante }}</option>                        {% endfor %}                    </select>                    </div>                    <div class="field">                    <label for="duration">游戏时长</label>                    <select class="ui selection dropdown" name="duration" id="duration">                        <option class="default text" value="">请选择游戏时长</option>                            {% for t in gametime %}                        <option class="item" value={{ t.time_id }}>{{ t.time_name }}</option>                            {% endfor %}                        </select>                    </div>                    <div class="field">                        <div class="ui checkbox">                            <input type="checkbox" name="straddle" id="straddle">                                <label>是否开启straddle</label>                        </div>                    </div>                    <div class="ui hidden divider"></div>                      <button class="ui mini button primary" onclick="reg()">提交</button>                      <button class="ui mini button discard right floated" type="reset" >重填</button>                </form>                </div>            </div>            <div class="ui thirteen wide column" name="table_list" id="table_list">            </div>        </div>    </div></div></div><script>    function load_table_list() {          $("#table_list").load('/table_list/ #content',function (result) {        $result=$(result);        $result.find("script").appendTo('#content');    });    }</script><script>	$(document).ready(function(){	    $('.ui.dropdown').dropdown();		$("#menu").click(function(){		    $('.ui.sidebar').sidebar('toggle');	});		$("#sidebar").load('/loadsidebar/');        $("#c").addClass('active red item');        $.ajaxSetup ({ cache: false })	}					 );    load_table_list();</script><script>    function getante() {        var blind_id=$('#blind').val();        $.ajax({            url: '/getante/',            type: 'post',            data: {'blind_id': blind_id},            success: function (ante_list) {                       // alert(ante_list)                $('#ante').empty();                $.each(JSON.parse(ante_list),function (key,value) {                            var list = '<option class="item" value='+ key + '>' + value + '</option>';                            $('#ante').append(list);                        })                       // $('#ante').dropdown('refresh')            }        })    }</script><script>    $("#table_reg").form({        on:'blur',        inline : true,        fields:{            game_type:{              identifier :'game_type',              rules:[{                  type: 'empty',                  prompt: '请选择游戏类型'              }              ]            },            blind:{                identifier: 'blind',                rules:[{                    type: 'empty',                    prompt:'请选择盲注级别'                }]            },            ante:{                identifier: 'ante',                rules:[{                    type: 'empty',                    prompt:'请选择前注'                }]            },            duration:{                identifier: 'duration',                rules:[{                    type: 'empty',                    prompt:'请选择游戏时长'                }]            }        }})</script><script>        function reg() {            var msg=$("#table_reg").form('is valid');            if (msg){                var blind=$('#blind').dropdown('get value');                var gametype=$('#game_type').dropdown('get value');                var ante=$('#ante').dropdown('get text');                var duration=$('#duration').dropdown('get text');                var straddle=$('#straddle').prop('checked');                $.ajax({                    url:"/game_reg/",                    type: 'post',                    data:{'blind':blind,'gametype':gametype, 'ante':ante,'duration':duration, 'straddle':straddle},                    success: function (result) {                        load_table_list();                        $('.ui.dropdown').dropdown('restore defaults');                      //  $('#game_type').allowReselection=true;                    }                })            }    }</script></body></html>