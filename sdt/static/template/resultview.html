<!DOCTYPE html>
{% load static %}
{% load staticfiles %}
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>战绩查询</title>
    <!--<link rel="stylesheet" href="../semantic/semantic.min.css">-->
    <link rel="stylesheet" href="{%static 'semantic/semantic.css' %} ">
    <link rel="stylesheet" href="{%static 'semantic/calendar.css' %} ">
<script src="http://lib.baomitu.com/jquery/1.12.4/jquery.min.js"></script>
<script src="http://lib.baomitu.com/datatables/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="http://lib.baomitu.com/datatables/1.10.16/js/dataTables.semanticui.min.js"></script>
<script src="http://lib.baomitu.com/semantic-ui/2.2.13/semantic.min.js"></script>

</head>
<body>
<div id="sidebar" ></div>
<div class="dimmed pusher">
<div class="ui labeled icon button" id="menu">
		<i class="sidebar icon"></i>
		导航
		</div>
    <div class="ui doubling stackable container" style="padding: 50px">
        <div class="ui five item inverted menu">
		<a class="item" id="a">出纳台</a>
		<a class="item" id="b">玩家管理</a>
		<a class="item" id="c">牌局管理</a>
		<a class="item" id="d">实时报表</a>
		<a class="item" id="e">俱乐部管理</a>
		</div>
    	<div class="ui horizontal divider">
	战绩查询
	</div>
    <div class="ui form" id="search">
    <div class="four fields">
        <div class="field">
            <label>俱乐部</label>
            <select class="ui fluid search dropdown" id="club_id" name="club_id">
            <option value="">请选择俱乐部</option>
                {% for t in t_club %}
            <option value={{ t.0 }}>{{ t.1 }}</option>
                {% endfor %}
        </select>
        </div>
        <div class="field">
            <label>牌局号</label>
            <select class="ui fluid search dropdown">
            <option value="">请选择牌局号</option>
                {% for t in t_game_list %}
                    <option value={{ t.game_no }}>{{ t.game_no }}</option>
                {% endfor %}
        </select>
        </div>
        <div class="field">
            <label>开始日期</label>
            <div class="ui calendar" name="startdate" id="startdate">
                <div class="ui input left icon">
                    <i class="calendar icon"></i>
                    <input type="text" placeholder="请选择开始日期" id="start" name="start" >
                </div>
            </div>
        </div>
        <div class="field">
            <label>截止日期</label>
            <div class="ui calendar" name="enddate" id="enddate">
                <div class="ui input left icon">
                    <i class="calendar icon"></i>
                    <input type="text" placeholder="请选择截止日期"  id="end" name="end" >
                </div>
            </div>
        </div>
    </div>
        <button class="ui button primary" onclick="aa()">查询</button>
        <button class="ui red button" onclick="getall()" id="getall">全部</button>
    </div>
    <div name="result_l1" id="result_l1"></div>

    </div>
</div>

<script>
	$(document).ready(function(){
        $('#getall').disable=true;
		$("#menu").click(function(){
		    $('.ui.sidebar').sidebar('toggle');

	});
		$("#sidebar").load("{% static 'template/sidebar.html'%}");

        $("#d").addClass('active red item');
    	$(".ui.dropdown").dropdown()    ;
	}

					 )

</script>
	<script>
	$(document).ready(function() {

        $.ajaxSetup({
            cache : false,
            async: true
        })
    	var str_club_id
		str_club_id=$("#club_id").dropdown('get value')
		$("#club_id").value=str_club_id
        $('.ui.calendar').calendar({
            type: 'date',
            formatter : {
                date: function (date, settings) {
                    if(!date) return '';
                    var year = date.getFullYear();
                    var month = date.getMonth() + 1;
                    var day = date.getDate();
                    month = month < 10 ? '0' + month : month;
                    day = day < 10 ? '0' + day : day;
                    return year + '-' + month + '-' + day ;
                }
            },
            text : {
                days: ['日','一','二','三','四','五','六'],
                months: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
                monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                today: '今天',
                now: '现在',
                am: 'AM',
                pm: 'PM'
            },
            today : true ,
            disableYear : false,
	    })

	});
	$('#search').form({
        on : 'submit',
        inline:true,
        fields: {
            start: {
                identifier : 'start',
                rules :[
                    {
                        type:'empty',
                        prompt : '请选择开始时间'
                    }
                    ]
            },
            end: {
                identifier: 'end',
                rules : [{
                        type: 'empty',
                        prompt:'请选择结束时间'
                        }
                ]
            }
        }
    })
	</script>

<script>

</script>
<script>
    function aa() {
        var club_id=$("#club_id").dropdown('get value');
        var club_name=$("#club_id").find("option:selected").text();
        var start =$("#start").val();
        var end = $("#end").val();
        $('#result_l1').load("/result_l1/",
            {'club_id' : club_id, 'club_name': club_name,'start':start,'end': end}
        )
        $.ajaxSetup ({ cache: false });
    }
</script>
</body>
</html>