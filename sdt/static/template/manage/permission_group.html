<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <title>Title</title></head><body><div>    <div class="ui form">        <div class="ui fields">            <div class="ui field">            <label>用户组</label>            <select class="ui selected dropdown" id="permission_group" onchange="get_list()">                <option value="">选择用户组</option>            {% for t in tb_group %}                <option value={{ t.group_id }}>{{ t.group_name }}</option>            {% endfor %}            </select>            </div>        </div>        <div class="grouped fields">        <div class="ui relaxed list" id="type_list">            <label>选择用户组权限</label>                {% for t in tb_permission %}                <div class="item">                    <div class="ui checkbox">                    <input type="checkbox" id={{ t.type_id }} name={{ t.permission }} >                    <label>{{ t.permission }}</label>                    </div>                </div>                {% endfor %}            </div>        <button class="ui positive button" onclick="add()">确认</button>        </div>    </div></div></body><script>    $(document).ready(function () {        $('.ui.dropdown').dropdown();    })</script><script>    function get_list() {       var group_id=$('#permission_group').dropdown('get value');       $.ajax({           url:'/get_permission_list/',           type:'post',           data:{'group_id': group_id},           success:function (result) {               //alert(result);               $('.ui.checkbox').checkbox('set unchecked');               var type_list=[];               $.each(JSON.parse(result),function (key,value) {                   type_list.push(value);               });               var len=type_list.length;               var checkid="";               for(var i=0; i<len;i++){                   checkid=type_list[i];                   $("#"+checkid+"").prop('checked', true)               }           }       })    }</script><script>    function add() {        var type_list=[];        var type_group=$('.ui.checkbox');        var group_id=$('#permission_group').dropdown('get value');        for (var i=1;i<=type_group.length;i++)        {            var result=$("#"+i+"").prop('checked');            if (result===true)            {                type_list.push(i)            }        }        $.ajax({            url:'/permission_group_set/',            type:'post',            traditional:true,            data:{'type_list':type_list,'group_id': group_id},            success:function (result) {                if(result==='True')                {                    alert('修改成功')                }                else {                    alert("修改失败")                }            }        })    }</script></html>