<!DOCTYPE html><html lang="zh"><head>    <meta charset="UTF-8">    <title>Title</title></head><body><div id="content">    <div class="ui form" name="new_developer" id="new_developer">        <div class="fields">            <div class="field">                <label>托管俱乐部名称</label>                <input type="text" placeholder="请填写托管俱乐部名称" name="developer_name" id="developer_name">            </div>            <div class="field">                <label>自身水钱比例</label>                <input type="text" placeholder="请填写（0-100）整数" name="income_rate" id="income_rate">            </div>            <div class="field">                <label>自身保险比例</label>                <input type="text" placeholder="请填写（0-100）整数" name="insure_rate" id="insure_rate">            </div>            <div class="field">                <label>备注</label>                <input type="text" placeholder="" name="note" id="note">            </div>            <div class="field">                <label>&nbsp;  </label>                <button class="ui positive primary button" name="add" id="add" onclick="add_developer()">添加</button>            </div>        </div>    </div>    {% for t in club_list %}    <input type="hidden" id="income_own" value={{ t.income_rate }} >    <input type="hidden" id="insure_own" value={{ t.insure_rate }} >    {% endfor %}    <div class="ui horizontal hidden divider"></div>        <div class="ui info message">            <i class="close icon"></i>            <div class="header">操作提示</div>            <ul class="list"></ul>                {% for t in club_list %}                <li>本俱乐部当前水钱比例{{ t.income_rate }}，保险比例{{ t.insure_rate }}</li>                <li>请不要填写超过比例数字</li>                {% endfor %}        </div>    <div class="ui horizontal hidden divider"></div>    <div id="developer_list"></div>        <div class="ui small modal" id="modal1">        <h2 class="header">确认信息</h2>        <div class="content">            <p id="msg1"></p>        </div>        <div class="actions">            <button class="ui negative button">返回</button>        </div>        </div><script>    $(document).ready(function () {        $('#developer_list').load('/developer_list/')    })</script><script>        $.fn.form.settings.rules.uniqueclub=function (developer_name) {        var valid=false;        $.ajax({            url: '/check_developer/',            data:{"developer_name" : developer_name},            type: 'POST',            async: false,            dataType: 'text'           // success:function (message) {           //     valid=message;               // alert(valid)           // }        })        .done(function (result) {            if (result==='False')                valid=false;            else valid=true        });        //alert(valid);        return valid;    };    $.fn.form.settings.rules.income=function (income_rate) {        var valid=false;        var income_own=$('#income_own').val();        if (parseInt(income_own)>=parseInt(income_rate))        {            valid=true;        }        return valid;    };    $.fn.form.settings.rules.insure=function (insure_rate) {        var valid=false;        var insure_own=$('#insure_own').val();        if (parseInt(insure_own)>=parseInt(insure_rate))        {            valid=true;        }        return valid;    };$('#new_developer')  .form({    on: 'blur',    inline : true,    fields: {      developer_name: {        identifier  : 'developer_name',        rules: [          {            type   : 'empty',            prompt : '请填写拉手名称'          },          {            type  :'uniqueclub',            prompt:'拉手已存在'             }        ]      },       note:{         identifier: 'note',          rules:[              {                  type: 'maxLength[10]',                  prompt:'最多不能超过十个汉字'              }          ]      },       income_rate:{         identifier: 'income_rate',          rules:[              {                  type: 'regExp',                  value:'/^(0|[1-9]\\d?|100)$/',                  prompt:'请输入0-100整数'              },              {                  type:'income',                  prompt: '超过自身比例'              }          ]      },       insure_rate:{         identifier: 'insure_rate',          rules:[              {                  type: 'regExp',                  value:'/^(0|[1-9]\\d?|100)$/',                  prompt:'请输入0-100整数'              },              {                  type:'insure',                  prompt: '超过自身比例'              }          ]      },      onSuccess: function (event,fields) {          event.preventDefault();          console.log(fields);      }    }})</script><script>    function add_developer() {        var developer_name=$.trim($('#developer_name').val());        var income_rate=$.trim($('#income_rate').val());        var insure_rate=$.trim($('#insure_rate').val());        var note=$.trim($('#note').val());        $.ajax({            url:'/developer_reg/',            type:'post',            data:{'developer_name':developer_name, 'income_rate': income_rate,                    'insure_rate': insure_rate, 'note': note},            success: function (result) {               // alert(result)                if(result==="True")                {                    $('#msg1').text("添加成功");                    $('#modal1').modal('show');                    $('#developer_list').load('/developer_list/')                    $('#developer_name').val("");                    $('#income_rate').val("");                    $('#insure_rate').val("");                    $('#note').val("");                }                else {                    $('#msg1').text('添加失败');                    $('#modal1').modal('show');                }            }        })    }</script></div></body></html>